https://mp.weixin.qq.com/s/DJ8Fdq1_cIoW0_NYekZwFw
##### window.performerce

##### performance.now()
在chrome浏览器中返回的时间是以毫秒为单位的，更精确。
performance.now() 与 Date.now() 不同的是，返回了以微秒（百万分之一秒）为单位的时间，更加精准。
并且与 Date.now() 会受系统程序执行阻塞的影响不同，performance.now() 的时间是以恒定速率递增的，不受系统时间的影响（系统时间可被人为或软件调整）。
这里主要是一些需要入侵业务代码打点的时候，可以使用这个 API 来获取时间戳
注意：Date.now() 输出的是距离 1970 的毫秒数，而 performance.now() 输出的是相对于 performance.timing.navigationStart(页面初始化) 的时间。
使用 Date.now() 的差值并非绝对精确，因为计算时间时受系统限制（可能阻塞）。但使用 performance.now() 的差值，并不影响我们计算程序执行的精确时间。

##### window.performance.timing
window.performance.timing里面有很多的性能相关的时间戳记录，我们来看一些常用的：
```
属性	              含义
navigationStart	   准备加载页面的起始时间
domainLookupStart	 开始进行dns查询的时间
domainLookupEnd	   dns查询结束的时间
connectStart	     TCP连接开始
connectEnd	       TCP连接完成
domInteractive	   解析dom树开始
domComplete	       解析dom树结束
loadEventEnd	     onload事件结束的时间
fetchStart	       开始检查缓存或开始获取资源的时间
domLoading	       loading的时间 (这个时候还木有开始解析文档)
更多查看：https://developer.mozilla.org/en-US/docs/Web/API/PerformanceTiming
```

##### 这样，我们就可以定出一些关键步骤耗时：
DNS查询耗时 = domainLookupEnd - domainLookupStart
TCP链接耗时 = connectEnd - connectStart
request请求耗时 = responseEnd - responseStart
解析dom树耗时 = domComplete - domInteractive
白屏时间 = domloading - fetchStart
domready时间 = domContentLoadedEventEnd - fetchStart
onload时间 = loadEventEnd - fetchStart


重定向耗时：redirectEnd - redirectStart
DNS查询耗时：domainLookupEnd - domainLookupStart
TCP链接耗时：connectEnd - connectStart
HTTP请求耗时：responseEnd - responseStart
解析dom树耗时：domComplete - domInteractive
白屏时间：responseStart - navigationStart
DOM ready时间：domContentLoadedEventEnd - navigationStart
onload时间：loadEventEnd - navigationStart


##### 白屏时间 = responseStart - navigationStart

##### 资源性能API
performance.timing记录的是用于分析页面整体性能指标。如果要获取个别资源（例如JS、图片）的性能指标，就需要使用Resource Timing API。
performance.getEntries()方法，包含了所有静态资源的数组列表；每一项是一个请求的相关参数有name，type，时间等等。
除了performance.getEntries之外，performance还包含一系列有用的方法，比如：

performance.now()
Performance.getEntriesByName()
....
上面这些方法我不具体介绍，大家可以自行查阅相关文档了解，这里我主要说一下我们可以利用getEntriesByName()这个方法来计算首屏时间：
##### 首屏时间：performance.getEntriesByName("first-contentful-paint")[0].startTime - navigationStart


